@page "/patients"
@using FhirWatch.SharedComponents
@using FhirWatch.PatientModule.Components

<button @onclick="NavigateToPatientDashboard" class="btn btn-primary">Back</button>
<br />
Active Filters:
<ActiveFilters Filters="@Filters"/>
<br />
<div class="container">
    <div class="row">
        <div class="col">
            <PatientCount Header="FHIR Records" Count="@FhirCount" />            
        </div>
        <div class="col">
            <PatientCount Header="Dataverse Records" Count="@DVCount" />
        </div>
    </div>
    <div class="row">
        <h3>Compare Patients</h3>
    </div>
    <div class="row overflow-scroll">
        @if (Loading)
        {
            <LoadingSpinner />
        }
        else
        {
            <div class="table-responsive">
                <table class="table table-striped table-bordered table-hover table-fixed">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col" rowspan="2" class="text-center" style="vertical-align: middle">Actions</th>
                            <th scope="col" rowspan="2" class="text-center" style="vertical-align: middle">Id</th>
                            <th scope="col" colspan="2" class="text-center">FirstName</th>
                            <th scope="col" colspan="2" class="text-center">LastName</th>
                            <th scope="col" colspan="2" class="text-center">DateOfBirth</th>
                            <th scope="col" colspan="2" class="text-center">Address 1 Line 1</th>
                            <th scope="col" colspan="2" class="text-center">Address 1 City</th>
                            <th scope="col" colspan="2" class="text-center">Address 1 Country</th>
                            <th scope="col" colspan="2" class="text-center">Address 1 State Province</th>
                            <th scope="col" colspan="2" class="text-center">GenderCode</th>
                            <th scope="col" colspan="2" class="text-center">FamilyStatusCode</th>
                            <th scope="col" colspan="2" class="text-center">LastUpdatedOn</th>
                            <th scope="col" colspan="2" class="text-center">FhirVersion</th>
                            <th scope="col" colspan="2" class="text-center">Telephone2</th>
                        </tr>
                        <tr>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var patientPair in Patients)
                        {
                            <tr>
                                <td><button @onclick="@(e => NavigateToPatientDetail(e, patientPair.Item1?.Id))" class="btn btn-primary"><span class="oi oi-magnifying-glass"></span></button></td>
                                <td>@patientPair.Item1?.Id</td>
                                <td>@patientPair.Item1?.FirstName</td>
                                <td>@patientPair.Item2?.FirstName</td>
                                <td>@patientPair.Item1?.LastName</td>
                                <td>@patientPair.Item2?.LastName</td>
                                <td>@patientPair.Item1?.DateOfBirth</td>
                                <td>@patientPair.Item2?.DateOfBirth</td>
                                <td>@patientPair.Item1?.Address1Line1</td>
                                <td>@patientPair.Item2?.Address1Line1</td>
                                <td>@patientPair.Item1?.Address1City</td>
                                <td>@patientPair.Item2?.Address1City</td>
                                <td>@patientPair.Item1?.Address1Country</td>
                                <td>@patientPair.Item2?.Address1Country</td>
                                <td>@patientPair.Item1?.Address1StateProvince</td>
                                <td>@patientPair.Item2?.Address1StateProvince</td>
                                <td>@patientPair.Item1?.GenderCode</td>
                                <td>@patientPair.Item2?.GenderCode</td>
                                <td>@patientPair.Item1?.FamilyStatusCode</td>
                                <td>@patientPair.Item2?.FamilyStatusCode</td>
                                <td>@patientPair.Item1?.LastUpdatedOn</td>
                                <td>@patientPair.Item2?.LastUpdatedOn</td>
                                <td>@patientPair.Item1?.FhirVersion</td>
                                <td>@patientPair.Item2?.FhirVersion</td>
                                <td>@patientPair.Item1?.Telephone2</td>
                                <td>@patientPair.Item2?.Telephone2</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
    </div>
</div>

